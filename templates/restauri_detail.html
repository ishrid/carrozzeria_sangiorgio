{# carrozzeria_sangiorgio_project/templates/restauri/restauri_detail.html #}
{% extends 'base.html' %}
{% load static %}

{% block title %}{{ restauro.titolo }} - Carrozzeria Sangiorgio{% endblock %}

  
    
<style>
  /* Stile per uniformare le immagini del carosello */
  .swiper-slide img {
    display: block;
    width: 100%;
    height: 500px; /* Altezza fissa per il carosello */
    object-fit: cover;
    border-radius: .5rem;
  }
</style>
 
 
  <!-- Vendor styles -->
     
    <link rel="stylesheet" media="screen" href="{% static 'vendor/swiper/swiper-bundle.min.css'%}">
 
    <link rel="stylesheet" media="screen" href="{% static 'vendor/img-comparison-slider/dist/styles.css' %}">

<script>
  // Inizializza un carosello Swiper per OGNI fase di lavoro trovata nella pagina.
  document.addEventListener('DOMContentLoaded', function () {
    const swiperContainers = document.querySelectorAll('[id^="swiper-fase-"]');
    swiperContainers.forEach(container => {
      new Swiper(container, {
        loop: true,
        autoplay: {
          delay: 5000,
          disableOnInteraction: false,
        },
        pagination: {
          el: '.swiper-pagination',
          clickable: true,
        },
        navigation: {
          nextEl: '.swiper-button-next',
          prevEl: '.swiper-button-prev',
        },
      });
    });
  });
</script>
{% block content %}



    <section class="position-relative pt-md-2 pt-lg-3 pt-xl-3 pb-5 pb-lg-0">
        <div class="position-absolute top-0 start-0 w-100 bg-secondary d-none d-lg-block" style="height: 792px; margin: -1px 0 0 -1px; background-size: 75px 75px; background-image: linear-gradient(to right, var(--ar-gray-200) 1px, transparent 1px), linear-gradient(to bottom, var(--ar-gray-200) 1px, transparent 1px);"></div>
        <div class="position-absolute top-0 start-0 w-100 h-100 bg-secondary d-lg-none" style="margin: -1px 0 0 -1px; background-size: 75px 75px; background-image: linear-gradient(to right, var(--ar-gray-200) 1px, transparent 1px), linear-gradient(to bottom, var(--ar-gray-200) 1px, transparent 1px);"></div>
        <div class="container position-relative z-2 pt-5 pb-2 pb-sm-3 pb-lg-0">
            <div class=" py-5 mt-3 mt-sm-4 mb-md-3 mb-lg-4 mb-xl-5">
                <nav aria-label="breadcrumb">
                    <ol class="pt-lg-3 pb-lg-4 pb-2 breadcrumb">
                           <li class="breadcrumb-item"><a href="{% url 'main:home' %}">Home</a></li>
            <li class="breadcrumb-item"><a href="{% url 'vendita:lista_veicoli' %}">Restauri</a></li>
            <li class="breadcrumb-item active" aria-current="page">{{ restauro.titolo }}</li>
        
                    </ol>
                </nav>
                <h1 class="display-3 pb-1 pb-sm-2 pb-md-3">{{ restauro.titolo }}</h1>
                <p class="lead text-muted fs-2   mb-4">  {% if restauro.marca_veicolo %}{{ restauro.marca_veicolo }} {% endif %}
                {% if restauro.modello_veicolo %}{{ restauro.modello_veicolo }} {% endif %}
                {% if restauro.anno_veicolo %}({{ restauro.anno_veicolo }}) {% endif %}
                - Tipo: {{ restauro.get_tipo_veicolo_display }}
                {% if restauro.data_completamento %}, Completato il {{ restauro.data_completamento|date:"d M Y" }}{% endif %}
            </p>
                
         
            </div>
            
            <div class="row align-items-center">

      <div class="col-lg-5">
         

        <h1 class="display-4 fw-bold">{{ restauro.titolo }}</h1>
        <p class="fs-lg text-muted">{{ restauro.descrizione_breve }}</p>

        <ul class="list-unstyled mt-4 fs-lg">
            <li class="d-flex mb-2"><i class="ai-car fs-4 text-primary me-3"></i><strong>Modello:</strong>&nbsp;  {{ restauro.marca_veicolo }} {{ restauro.modello_veicolo }} </li>
            <li class="d-flex mb-2"><i class="ai-calendar fs-4 text-primary me-3"></i><strong>Anno:</strong>&nbsp;({{ restauro.anno_veicolo }})</li>
            <li class="d-flex"><i class="ai-settings fs-4 text-primary me-3"></i><strong>Intervento:</strong>&nbsp;Restauro conservativo completo</li>
        </ul>
      </div>

      <div class="col-lg-7 mt-4 mt-lg-0">
        <img src="{{ restauro.foto_dopo.url }}" class="img-fluid rounded-3 shadow-lg" alt="Restauro Alfa Romeo Giulia">
      </div>

      
    </div>





        </div>
    </section>

 

  



<section class="container py-5 mt-5">
    <div class="row justify-content-center">
        <div class="col-lg-10">
            <h2 class="display-4 text-center mb-4">Prima e Dopo il Restauro</h2>
            <p class="text-center text-muted mb-5">Trascina il cursore per vedere la trasformazione.
               </p>




            {# Galleria "Prima/Dopo" semplice con immagini affiancate #}
              
  {% if restauro.foto_prima and restauro.foto_dopo %}
  
 
  
      <!-- Light / Dark mode (Comparison slider) -->
      <section class="d-flex w-100 position-relative overflow-hidden  ">
        <div class="position-relative flex-xl-shrink-0 z-5 start-50 translate-middle-x my-n1" style="max-width: 1100px;">
          <div class="mx-md-n5 mx-xl-0">
            <div class="mx-n4 mx-sm-n5 mx-xl-0">
              <div class="mx-n5 mx-xl-0">
                <img-comparison-slider class="mx-n5 mx-xl-0">
                  <img slot="first" src="{{ restauro.foto_prima.url }}"   alt="Dak Mode">
                  <img slot="second" src="{{ restauro.foto_dopo.url }}"   alt="Light Mode">
                  <div slot="handle" style="width: 42px;">
                    <svg class="text-primary rounded-circle" width="42" height="42" viewBox="0 0 42 42" xmlns="http://www.w3.org/2000/svg">
                      <g>
                        <circle fill="currentColor" cx="21" cy="21" r="21"></circle>
                      </g>
                      <path fill="white" d="M25.5019 19.7494H15.9147V15.9146L11.1211 20.7081L15.9147 25.5017V21.6669H25.5019V25.5017L30.2955 20.7081L25.5019 15.9146V19.7494Z"></path>
                    </svg>
                  </div>
                </img-comparison-slider>
              </div>
            </div>
          </div>
        </div>
        <div class="position-absolute top-0 start-0 w-50 h-100" style="background-color: #f6f9fc;"></div>
        <div class="position-absolute top-0 end-0 w-50 h-100" style="background-color: #f6f9fc;"></div>
      </section>

  {% else %}
  <div class="alert alert-warning text-center" role="alert">
    Immagini "prima" e "dopo" non disponibili per questo progetto.
  </div>
  {% endif %}
 
 

            <h2 class="h3 mt-5 mb-3">Descrizione Dettagliata dell'Intervento</h2>
            <p class="fs-lg text-muted mb-5">{{ restauro.descrizione_dettagliata|linebreaksbr }}</p>

            {# Galleria Processo (utilizzando un carosello Bootstrap) #}
            {% if restauro.galleria_processo.exists %}
            <h2 class="h3 mt-5 mb-3">Il Processo di Restauro</h2>
            <div id="restauroGallery" class="carousel slide mb-5" data-bs-ride="carousel">
                <div class="carousel-inner rounded-3 shadow-sm">
                    {% for img in restauro.galleria_processo.all %}
                    <div class="carousel-item {% if forloop.first %}active{% endif %}">
                        <img src="{{ img.immagine.url }}" class="d-block w-100 object-fit-cover" alt="{{ img.alt_text }}" style="height: 500px;">
                        {% if img.descrizione %}
                        <div class="carousel-caption d-none d-md-block">
                            <p>{{ img.descrizione }}</p>
                        </div>
                        {% endif %}
                    </div>
                    {% endfor %}
                </div>
                <button class="carousel-control-prev" type="button" data-bs-target="#restauroGallery" data-bs-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Previous</span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#restauroGallery" data-bs-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Next</span>
                </button>
            </div>
            {% endif %}





<section class="container py-5 border-top">
    <div class="text-center mb-5">
        <h2 class="h1">Diario del Restauro</h2>
        <p class="fs-lg text-muted">Ogni passaggio, dalla scocca nuda al gioiello finito.</p>
    </div>

    {% for fase in restauro.fasi_lavoro.all %}
    <div class="row align-items-center py-4 {% if not forloop.last %}border-bottom{% endif %}">
        <div class="col-md-5 {% if forloop.counter|divisibleby:2 %}order-md-2{% endif %}">
            <div class="pe-lg-5 {% if forloop.counter|divisibleby:2 %}ps-lg-5{% endif %} mb-4 mb-md-0">
                <h3 class="h2">{{ forloop.counter }}. {{ fase.titolo }}</h3>
                <p class="text-muted">{{ fase.descrizione|linebreaksbr }}</p>
            </div>
        </div>
        <div class="col-md-7 {% if forloop.counter|divisibleby:2 %}order-md-1{% endif %}">
            {% if fase.immagini_fase.exists %}
            <div class="swiper" id="swiper-fase-{{ fase.id }}">
                <div class="swiper-wrapper">
                    {% for img_fase in fase.immagini_fase.all %}
                    <div class="swiper-slide">
                        <img src="{{ img_fase.immagine.url }}" alt="{{ img_fase.alt_text|default:fase.titolo }}">
                    </div>
                    {% endfor %}
                </div>
                <div class="swiper-button-prev text-white"></div>
                <div class="swiper-button-next text-white"></div>
                <div class="swiper-pagination"></div>
            </div>
            {% else %}
            <div class="bg-secondary rounded-3 d-flex justify-content-center align-items-center" style="height: 400px;">
                <p class="text-muted">Nessuna immagine per questa fase.</p>
            </div>
            {% endif %}
        </div>
    </div>
    {% empty %}
    <div class="alert alert-light text-center" role="alert">
      Il diario di bordo con le fasi di lavorazione non è stato ancora pubblicato.
    </div>
    {% endfor %}
</section>






                
        <!-- Testimonial  
        <div class="py-5 my-lg-2 my-xl-4 my-xxl-5">
          <h2 class="h1 pb-2 pb-lg-4 pt-sm-4 pt-lg-5 mt-n3 mt-sm-0">Testimonial from Vintage</h2>
          <div class="card border-0 bg-secondary mb-2 mb-sm-3 mb-md-4 mb-lg-5">
            <div class="card-body px-lg-0 py-lg-5">
              <div class="row py-2 py-sm-1 py-md-3 py-lg-4 py-xl-5">
                <div class="col-md-4 col-lg-3 offset-lg-1 mb-3 mb-md-0">
                  <img class="d-block rounded-circle mb-3" src="{{ restauro.foto_dopo.url }}" width="86" alt="Lilian Bocouse">
                  <h4 class="mb-0">Lilian Bocouse</h4>
                  <p class="fs-lg text-body-secondary mb-0">Head of Marketing</p>
                </div>
                <div class="col-md-8 col-lg-7">
                  <p class="text-dark lead mb-0">“Around provides us with the detailed and accurate data we need to make strategic decisions. All tools are constantly being improved and contain a lot of useful and interesting information. Thanks to Around, we can constantly analyze our big data quickly and efficiently.”</p>
                </div>
              </div>
            </div>
          </div>
        </div>
    -->

<div class="  text-center py-5 my-3">
    <h2 class="h1 mb-4">Interessato a un restauro?</h2>
    <p class="fs-lg text-muted mb-5">Hai un'auto a cui vuoi ridare vita? Contattaci per un preventivo senza impegno.</p>
    <div>
        <a href="#" class="btn btn-lg btn-outline-secondary me-md-3 mb-3 mb-md-0">
          <i class="ai-arrow-left me-2"></i>Vedi Altri Restauri
        </a>
        <a href="#" class="btn btn-lg btn-primary">
          <i class="ai-mail me-2"></i>Richiedi un Preventivo
        </a>
    </div>
</div>




 <!-- Other projects -->
      <section class="container pb-5 mb-2 mb-lg-3 mb-xl-4 mb-xxl-5">
        <h2 class="h1 pb-3 pb-lg-4">Next projects</h2>
        <div class="row row-cols-1 row-cols-sm-2 align-items-end mb-2 pb-md-4">
          <div class="col">
            <div class="zoom-effect position-relative border-bottom pb-3" style="max-width: 550px;">
              <div class="zoom-effect-wrapper">
                <div class="zoom-effect-img">
                  <img src="{{ restauro.foto_dopo.url }}" alt="Image">
                </div>
              </div>
              <div class="pt-4 mt-lg-2">
                <h2 class="h4 mb-2">
                  <a class="stretched-link" href="portfolio-single-v2.html">Doe design</a>
                </h2>
                <div class="d-flex justify-content-between fs-lg text-body-secondary">
                  <span>Branding, Stationery</span>
                  <span>2021</span>
                </div>
              </div>
            </div>
          </div>
          <div class="col">
            <div class="zoom-effect position-relative border-bottom ms-auto pb-3" style="max-width: 605px;">
              <div class="zoom-effect-wrapper">
                <div class="zoom-effect-img">
                  <img src="{{ restauro.foto_dopo.url }}" alt="Image">
                </div>
              </div>
              <div class="pt-4 mt-lg-2">
                <h2 class="h4 mb-2">
                  <a class="stretched-link" href="portfolio-single-v2.html">D.G.Vent</a>
                </h2>
                <div class="d-flex justify-content-between fs-lg text-body-secondary">
                  <span>Stationery design</span>
                  <span>2021</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>


           
        </div>
    </div>
</section>

  
  
     


    <!-- Vendor scripts: JS libraries and plugins --> 
 <script src="{% static 'vendor/jarallax/dist/jarallax.min.js' %}"></script> 
    <script src="{% static 'vendor/swiper/swiper-bundle.min.js' %}"></script>

  
     
    <!-- Scroll down animated button 
    <style>
      .scroll-down-btn {
        display: inline-block;
        text-decoration: none;
      }
      .scroll-down-btn p {
        margin-top: 1.25rem;
        color: white;
        font-size: .875rem;
        font-weight: 500;
        letter-spacing: .375rem;
        text-indent: .375rem;
        animation: colorText 5s ease-out infinite, nudgeText 5s ease-out infinite;
      }
      .mouse {
        background: #2c333e linear-gradient(transparent 0%, transparent 50%, white 50%, white 100%);
        position: relative;
        width: 38px;
        height: 65px;
        margin: 0 auto;
        border-radius: 6rem;
        background-size: 100% 200%;
        animation: colorSlide 5s linear infinite, nudgeMouse 5s ease-out infinite;
      }
      .mouse:before, .mouse:after {
        content: '';
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
        margin: auto;
      }
      .mouse:before {
        width: 34px;
        height: 61px;
        background-color: #121519;
        border-radius: 6rem;
      }
      .mouse:after {
        background-color: white;
        width: .375rem;
        height: .375rem;
        border-radius: 100%;
        animation: trackBallSlide 5s linear infinite;
      }
      @keyframes colorSlide {
        0% { background-position: 0% 100%; }
        20% { background-position: 0% 0%; }
        21% { background-color: #2c333e; }
        29.99% {
          background-color: white;
          background-position: 0% 0%;
        }
        30% {
          background-color: #2c333e;
          background-position: 0% 100%;
        }
        50% { background-position: 0% 0%; }
        51% { background-color: #2c333e; }
        59% {
          background-color: white;
          background-position: 0% 0%;
        }
        60% {
          background-color: #2c333e;
          background-position: 0% 100%;
        }
        80% { background-position: 0% 0%; }
        81% { background-color: #2c333e; }
        90%, 100% {
          background-color: white;
        }
      }
      @keyframes trackBallSlide {
        0% {
          opacity: 1;
          transform: scale(1) translateY(-20px);
        }
        6% {
          opacity: 1;
          transform: scale(0.9) translateY(5px);
        }
        14% {
          opacity: 0;
          transform: scale(0.4) translateY(40px);
        }
        15%, 19% {
          opacity: 0;
          transform: scale(0.4) translateY(-20px);
        }
        28%, 29.99% {
          opacity: 1;
          transform: scale(1) translateY(-20px);
        }
        30% {
          opacity: 1;
          transform: scale(1) translateY(-20px);
        }
        36% {
          opacity: 1;
          transform: scale(0.9) translateY(5px);
        }
        44% {
          opacity: 0;
          transform: scale(0.4) translateY(40px);
        }
        45%, 49% {
          opacity: 0;
          transform: scale(0.4) translateY(-20px);
        }
        58%, 59.99% {
          opacity: 1;
          transform: scale(1) translateY(-20px);
        }
        60% {
          opacity: 1;
          transform: scale(1) translateY(-20px);
        }
        66% {
          opacity: 1;
          transform: scale(0.9) translateY(5px);
        }
        74% {
          opacity: 0;
          transform: scale(0.4) translateY(40px);
        }
        75%, 79% {
          opacity: 0;
          transform: scale(0.4) translateY(-20px);
        }
        88%, 100% {
          opacity: 1;
          transform: scale(1) translateY(-20px);
        }
      }
      @keyframes nudgeMouse {
        0%, 30%, 60%, 90% { transform: translateY(0); }
        20%, 50%, 80% { transform: translateY(8px); }
      }
      @keyframes nudgeText {
        0%, 30%, 60%, 90% { transform: translateY(0); }
        20%, 50%, 80% { transform: translateY(2px); }
      }
      @keyframes colorText {
        21%, 51%, 81% { color: #2c333e; }
        30%, 60%, 90% { color: white; }
      }
    </style>
-->
      
 

{% endblock %}


{% block extra_js %}
<script src="{% static 'vendor/img-comparison-slider/dist/index.js' %}"></script>
<script src="{% static 'vendor/swiper/swiper-bundle.min.js' %}"></script>


  
  
{% endblock %}
  
   

  