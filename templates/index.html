{# CarrozzeriaSanGiorgio/templates/index.html #}

{% extends 'base.html' %}
{% load static %}
{% load humanize %} {# Assicurati che django.contrib.humanize sia in INSTALLED_APPS #}
{% load custom_filters %} {# Assicurati che custom_filters.py sia in main/templatetags/ #}

 
{% block title %}Carrozzeria San Giorgio | Riparazioni, Restauri e Vendita Auto a Chiasso{% endblock %}

{% block head %}
    <meta name="description" content="Dal 1985, la Carrozzeria San Giorgio a Chiasso è il punto di riferimento per riparazioni impeccabili, restauri d'auto d'epoca e vendita di veicoli usati garantiti.">
    <meta name="keywords" content="carrozzeria chiasso, riparazioni auto, restauro auto d'epoca, auto usate garantite, carrozzeria ticino, verniciatura a forno, gestione sinistri">
{% endblock %}
{% block content %}
  

      <!-- Hero -->
      <section class="position-relative pt-md-2 pt-lg-4 pt-xl-5 pb-5 pb-lg-0">
        <div class="position-absolute top-0 start-0 w-100 bg-secondary d-none d-lg-block" style="height: 792px; margin: -1px 0 0 -1px; background-size: 75px 75px; background-image: linear-gradient(to right, var(--ar-gray-200) 1px, transparent 1px), linear-gradient(to bottom, var(--ar-gray-200) 1px, transparent 1px);"></div>
        <div class="position-absolute top-0 start-0 w-100 h-100 bg-secondary d-lg-none" style="margin: -1px 0 0 -1px; background-size: 75px 75px; background-image: linear-gradient(to right, var(--ar-gray-200) 1px, transparent 1px), linear-gradient(to bottom, var(--ar-gray-200) 1px, transparent 1px);"></div>
        <div class="container position-relative z-2 pt-5 pb-2 pb-sm-3 pb-lg-0">
          <div class="text-center py-5 mt-3 mt-sm-4 mb-md-3 mb-lg-4 mb-xl-5 mx-auto" style="max-width: 900px;">
            <h1 class="display-4 pb-1 pb-sm-2 pb-md-3">Carrozzeria San Giorgio: Esperienza, Qualità e Passione al tuo Servizio</h1>
            <p class="fs-lg mb-0">Dal 1985 a Chiasso, siamo specialisti in riparazioni di alta gamma, restauro di veicoli d'epoca e vendita di auto usate garantite. Qualità, trasparenza e cura artigianale per la tua auto.</p>
          </div>

          <!-- Google reviews (visible on screens > 768px) -->
          <div class="position-relative d-none d-md-block">
            <div class="position-absolute" style="right: 78.24%;">
                 
              <img class="position-relative z-2" src="{% static 'img/cta/google-reviews.png' %}" width="282" alt="Google reviews">
              <div class="position-absolute top-0 start-0 w-100 h-100 bg-light rounded-3 shadow-sm d-dark-mode-none"></div>
              <div class="position-absolute top-0 start-0 w-100 h-100 rounded-3 d-none d-dark-mode-block" style="background-color: #202327;"></div>
            </div>
          </div>
          
          <!-- Parallax image -->
          <div class="jarallax rounded overflow-hidden z-2" data-jarallax data-speed="0.65" style="-webkit-clip-path: url(#shape); clip-path: url(#shape);">
            <div class="d-none d-md-block ratio ratio-21x9"></div>
            <div class="d-md-none ratio ratio-16x9"></div>
            <svg class="d-none d-md-block" width="0" height="0" viewBox="0 0 1296 506">
              <defs>
                <clipPath id="shape" clipPathUnits="objectBoundingBox" transform="scale(0.0007716049383, 0.001976284585)">
                  <path d="M18 110H288C297.941 110 306 101.941 306 92V18C306 8.05887 314.059 0 324 0H1278C1287.94 0 1296 8.05888 1296 18V378C1296 387.941 1287.94 396 1278 396H1008C998.059 396 990 404.059 990 414V488C990 497.941 981.941 506 972 506H18C8.05887 506 0 497.941 0 488V128C0 118.059 8.05887 110 18 110Z"/>
                </clipPath>
              </defs>
            </svg>
             <span class="position-absolute top-0 start-0 w-100 h-100 bg-dark opacity-25"></span>
            <div class="jarallax-img" style="background-image: url({% static 'img/copertine/cop-servizi.jpg' %});"></div>
          </div>
 

          <!-- Google reviews + Clients (visible on screens < 768px) -->
          <div class="d-flex flex-column flex-sm-row gap-3 pt-3 d-md-none">
            <div class="position-relative d-flex justify-content-center w-100">
              <img class="position-relative z-2" src="{% static 'img/cta/google-reviews.png' %}" width="282" alt="Google reviews">
              <div class="position-absolute top-0 start-0 w-100 h-100 bg-light rounded-3 shadow-sm d-dark-mode-none"></div>
              <div class="position-absolute top-0 start-0 w-100 h-100 rounded-3 d-none d-dark-mode-block" style="background-color: #202327;"></div>
            </div>
             
          </div>
        </div>
      </section>

      
  


  
 

<section class="container py-5 my-md-3">
    <div class="text-center mb-5">
        <h2 class="h1">Soluzioni Complete per la Tua Auto</h2>
        <p class="fs-lg text-muted">Dalla manutenzione ordinaria ai progetti più complessi, abbiamo il servizio che fa per te.</p>
    </div>





{% for servizio in servizi_in_evidenza %}

    {% if forloop.counter|divisibleby:2 %}


    <!-- Services: Car insurance -->
      <section class="overflow-hidden pb-5">
        <div class="container pb-sm-3 mb-md-2 mb-lg-3">
          <div class="row g-4">
            <div class="col-md-7" data-aos="fade-right" data-aos-duration="600" data-aos-offset="280" data-disable-parallax-down="md">
              <img class="object-fit-cover w-100 h-100 rounded-3" src="{{ servizio.immagine_principale.url }}" alt="{{ servizio.nome }}">
            </div>
            <div class="col-md-5" data-aos="fade-left" data-aos-duration="600" data-aos-offset="280" data-disable-parallax-down="md">
              <div class="d-flex flex-column h-100 bg-secondary rounded-3 py-5 px-4 px-lg-5">
                <h2 class="mb-xl-4">{{ servizio.nome }}</h2>
                <p class="mb-4 mb-xl-5">{{ servizio.descrizione_dettagliata|default:servizio.descrizione_breve }}</p>
                 {% with punti_chiave=servizio.punti_chiave.all %}
    {% if punti_chiave %}
        <ul class="list-unstyled mb-4 mb-xl-5">
            {% for punto in punti_chiave %}
                <li class="d-flex pb-2 mb-1">
                    <span class="bg-primary mt-2 me-2" style="width: 10px; height: 10px; border-radius: 2px;"></span>
                    {{ punto.testo }}
                </li>
            {% endfor %}
        </ul>
    {% endif %}
{% endwith %}
                <div class="mt-auto">
                  <a class="btn btn-outline-primary" href="{% url 'main:servizi_detail' slug=servizio.slug %}">Scopri di più
                <i class="ai-arrow-right ms-2"></i>  </a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

    

    {% else %}

    
      <!-- Services: Travel insurance -->
      <section class="overflow-hidden pb-5">
        <div class="container pb-sm-3 mb-md-2 mb-lg-3">
          <div class="row g-4">
            <div class="col-md-7 order-md-2" data-aos="fade-left" data-aos-duration="600" data-aos-offset="280" data-disable-parallax-down="md">
              <img class="object-fit-cover w-100 h-100 rounded-3" src="{{ servizio.immagine_principale.url }}" alt="{{ servizio.nome }}">
            </div>
            <div class="col-md-5 order-md-1" data-aos="fade-right" data-aos-duration="600" data-aos-offset="280" data-disable-parallax-down="md">
              <div class="d-flex flex-column h-100 bg-secondary rounded-3 py-5 px-4 px-lg-5">
                <h2 class="mb-xl-4">{{ servizio.nome }}</h2>
                <p class="mb-4 mb-xl-5">{{ servizio.descrizione_dettagliata|default:servizio.descrizione_breve }}</p>
                {% with punti_chiave=servizio.punti_chiave.all %}
    {% if punti_chiave %}
        <ul class="list-unstyled mb-4 mb-xl-5">
            {% for punto in punti_chiave %}
                <li class="d-flex pb-2 mb-1">
                    <span class="bg-primary mt-2 me-2" style="width: 10px; height: 10px; border-radius: 2px;"></span>
                    {{ punto.testo }}
                </li>
            {% endfor %}
        </ul>
    {% endif %}
{% endwith %}
                <div class="mt-auto">
                  <a class="btn btn-outline-primary" href="{% url 'main:servizi_detail' slug=servizio.slug %}">Scopri di più
                <i class="ai-arrow-right ms-2"></i>
            </a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

 

    {% endif %}
  {% empty %}
    <div class="col-12 text-center py-5">
      <p>Nessun servizio disponibile al momento.</p>
    </div>
  {% endfor %}


 
 
</section>

<section class="bg-secondary py-5">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="h1">Le Nostre Occasioni Garantite</h2>
            <p class="fs-lg text-muted mx-auto" style="max-width: 700px;">
                Oltre a prenderci cura della tua auto, selezioniamo e prepariamo i migliori veicoli usati. Scopri le auto disponibili, tutte ispezionate e garantite 12 mesi dal nostro team.
            </p>
        </div>
        <div class="row g-4">
            

{% for veicolo in veicoli %}

            <div class="col-lg-4 col-md-6">
                 <div class="card h-100 shadow-sm border-0 position-relative">
                    <img src="{{ veicolo.foto_principale.url }}" class="card-img-top object-fit-cover" alt="Marca Modello Veicolo" style="height: 220px;">
                    <div class="card-body d-flex flex-column">
                        <h5 class="card-title">{{ veicolo.marca }} {{ veicolo.modello }}</h5>
                        <p class="card-text text-primary fs-4 fw-bold mb-2">{{ veicolo.prezzo|intcomma }} CHF</p>
                        <ul class="list-unstyled mb-3 fs-sm text-muted">
                            <li>Anno: {{ veicolo.anno }}</li>
                            <li>KM: {{ veicolo.chilometraggio|intcomma }}</li>
                            <li>Carburante: {{ veicolo.get_tipo_carburante_display }}</li>
                            <li>Cambio: {{ veicolo.get_tipo_cambio_display }}</li>
                        </ul>
                        <a href="{% url 'vendita:dettaglio_veicolo' slug=veicolo.slug %}" class="btn btn-outline-primary mt-auto">Vedi Dettagli</a>
                    </div>
                </div>
            </div>

   
            {% endfor %}
        </div>




        </div>
        <div class="text-center mt-5">
            <a href="{% url 'vendita:lista_veicoli' %}" class="btn btn-primary btn-lg">Scopri tutti i veicoli</a>
        </div>
    </div>
</section>

<section class="container py-5 my-md-3">
    <div class="row align-items-center">
        <div class="col-md-6 col-xl-5 ">
            <h2 class="h1 mb-4">Tecnologia, Esperienza e Passione al Tuo Servizio.</h2>
            <div class="pt-2">
                <div class="d-flex pb-3 mb-2">
                    <div class="text-primary fs-xl fw-bold pt-1 me-3">01</div>
                    <div>
                        <h3 class="h5">Tecnologia e Precisione</h3>
                        <p class="text-muted mb-0">Utilizziamo banchi di riscontro e tintometri computerizzati per riparazioni precise e colori identici all'originale.</p>
                    </div>
                </div>
                <div class="d-flex pb-3 mb-2">
                    <div class="text-primary fs-xl fw-bold pt-1 me-3">02</div>
                    <div>
                        <h3 class="h5">Gestione Sinistri Semplificata</h3>
                        <p class="text-muted mb-0">Pensiamo a tutta la burocrazia del sinistro, interfacciandoci direttamente con la tua assicurazione per un'esperienza senza stress.</p>
                    </div>
                </div>
                <div class="d-flex pb-3 mb-2">
                    <div class="text-primary fs-xl fw-bold pt-1 me-3">03</div>
                    <div>
                        <h3 class="h5">Materiali di Alta Qualità</h3>
                        <p class="text-muted mb-0">Selezioniamo solo vernici e ricambi dei migliori marchi per assicurare un risultato non solo bello, ma anche duraturo.</p>
                    </div>
                </div>
                <div class="d-flex">
                    <div class="text-primary fs-xl fw-bold pt-1 me-3">04</div>
                    <div>
                        <h3 class="h5">Garanzia sul Lavoro</h3>
                        <p class="text-muted mb-0">Ogni nostro intervento è coperto da garanzia, perché la tua tranquillità e la tua sicurezza sono la nostra priorità.</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-6 offset-xl-1 mt-4 mt-md-0">
             <img src="{% static 'img/servi/servizi-list.jpg' %}" class="rounded-3 shadow-lg" alt="Tecnico al lavoro">
        </div>
    </div>
</section>

<section class="bg-secondary py-5">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="h1">I Nostri Lavori Migliori</h2>
            <p class="fs-lg text-muted">Le parole non bastano. Lascia che siano le immagini dei nostri restauri a parlare della nostra passione.</p>
        </div>
        <div class="row g-4">
              
{% for restauro in restauri_in_evidenza %}
  <div class="col-lg-4 col-md-6 mb-4">
    <a href="{% url 'restauri:dettaglio_restauro' slug=restauro.slug %}" 
       class="card h-100 border-0 text-decoration-none shadow-sm transition-all rounded-4 hover-shadow-lg">

      <div class="card-img-wrapper overflow-hidden rounded-top-4">
        <img src="{{ restauro.foto_copertina.url }}" 
             alt="{{ restauro.titolo }}" 
             class="w-100 h-100 object-fit-cover transition-transform" 
             style="aspect-ratio: 4/3;">
      </div>

      <div class="card-body text-center px-3 py-4">
        <h3 class="h5 mb-2">{{ restauro.titolo }}</h3>
        <p class="fs-sm text-muted mb-0">{{ restauro.descrizione_breve|truncatechars:250 }}</p>
      </div>
    </a>
  </div>
{% endfor %}






        </div>
    </div>
</section>

<section class="container py-5 my-md-3">
    <div class="row align-items-center">
        <div class="col-md-6 mb-4 mb-md-0">
             <img src="{% static 'img/copertine/cop-chisiamo.jpg' %}" class="rounded-3 shadow-lg" alt="Team Carrozzeria San Giorgio">
        </div>
        <div class="col-md-6 ps-md-5">
            <h2 class="h1">Artigiani della Carrozzeria dal 1985</h2>
            <p class="fs-lg text-muted">Nati da una piccola officina e da una grande passione, siamo cresciuti investendo in tecnologia senza mai perdere l'anima artigianale. Il nostro team tratta ogni veicolo con la cura e l'attenzione che merita, come se fosse il nostro.</p>
            <a href="{% url 'main:chi_siamo' %}" class="btn btn-outline-primary">Scopri la Nostra Storia</a>
        </div>
    </div>
</section>
<!--
<section class="py-5">
    <div class="container">
        <h2 class="h4 text-center mb-5">Garanzia di Qualità e Affidabilità</h2>
        <div class="swiper" data-swiper-options='{"slidesPerView": 2, "spaceBetween": 24, "loop": true, "autoplay": {"delay": 3000, "disableOnInteraction": false}, "breakpoints": {"576": {"slidesPerView": 3}, "768": {"slidesPerView": 4}, "992": {"slidesPerView": 5}}}'>
            <div class="swiper-wrapper">
               {% for p in partner_home %} 
                <div class="swiper-slide"><img src="{{ p.immagine.url }}" class="d-block mx-auto" width="150" alt="{{ p.nome }}"></div>
            {% endfor %}
            </div>
        </div>
    </div>
</section>
-->


      <!-- Partners -->
      <section class="container py-5 my-lg-3 my-xl-4 my-xxl-5">
        <div class="overflow-auto pb-sm-4 pb-md-5 pt-sm-2 pt-md-3 mt-n2 mt-sm-0 mt-md-1 mt-lg-3 mb-lg-2" data-simplebar>
          <h2 class="h4 text-center mb-5">Garanzia di Qualità e Affidabilità</h2>
       
            <div class="row row-cols-5 g-0 pb-2" style="min-width: 768px;">
             

            {% for p in partner_home %}
        <div class="col d-flex justify-content-center">
          <img src="{{ p.immagine.url }}" width="196" alt="{{ p.nome }}">
        </div>
        {% endfor %}
             
             
              
          </div>
        </div>
      </section>

 

 <!-- CTA  sebra ok -->

<section class="container pt-lg-4 pt-xl-5 mt-lg-2 mt-xxl-4 pb-5">
    <div class="position-relative bg-size-cover bg-position-center rounded-3 py-5" style="background-image: url({% static 'img/cta/cta-bg.jpg' %});">
        <span class="position-absolute top-0 start-0 w-100 h-100 bg-dark opacity-25 rounded-3"></span>
        <div class="row position-relative z-2 py-md-4 py-lg-5 my-2">
            <div class="col-8 col-sm-6 col-md-5     offset-1">
                <h2 class="h1 text-white pb-2 pb-sm-3">Hai un Danno da Riparare o un Progetto in Mente?</h2>
                   <p class="fs-lg text-white pb-3 mb-3">Contattaci per una consulenza e un preventivo dettagliato, gratuito e senza impegno. Il nostro team è a tua completa disposizione.</p>
                
                <a class="btn btn-primary" href="{% url 'main:contatti' %}">Richiedi un preventivo ora</a>
            </div>
        </div>
    </div>
</section>

{% endblock %}